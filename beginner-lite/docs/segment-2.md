# Segment 3 detailed instructions

This segment starts the interactive portion of the class. A color grid will be displayed on the presenter's projector screen, and each student will be given a portion of the total grid that they may remotely control.

To control their grid, the students will need to send radio packets to the presenter's computer, containing X/Y coordinates and RGB values. Students are encouraged to draw patterns of their choice to the screen.

As a stretch goal, students may draw more complex patterns or pixel art images, or even draw limited animations.

## Part 0: Instructor Notes

Your instructor will introduce the drawing game that will be played in this segment. Each student will be given a portion of the board that they may draw on by sending commands via the on-board `DW1000` radio.

## Part 1: Sending packets

In order to draw on the board, you will need to send packets to the instructor's radio. For this segment, you may use the template located in `beginner/templates/segment-3`. This includes a new software project to use for this segment.

You will need to do a few things to successfully send a packet from your radio. Don't forget to look at the documentation generated by `cargo doc --open` for helpful information! These steps include:

1. Set a proper address and PAN for your device. You may use the provided PAN ID, and you should ask your instructor for the address to use for your device.
2. Generate a message to be sent over the radio. Take a look at the `protocol` crate included in this repository
3. Serialize the message using the `postcard` library. You'll need to serialize the message into a slice of bytes (a `&[u8]`).
4. Determine the destination address to send your message to. The PAN ID should be the same as your device's PAN ID, and ask your instructor for the destination address to use.
5. Send the message using the DW1000 radio, and wait for the transmission to complete.
6. Wait an appropriate amount of time before sending another message. If you send more than 64 messages per second (or roughly one message every 15.6ms), your messages may be rejected!

For your X and Y coordinates, you will need to send coordinates in the range of 1 to 8 inclusive in each dimension. Each color (Red, Green, Blue) can be in the full range of a `u8` value (0 to 255, inclusive).

## Part 2: Randomize

Not sure what to draw? Check out the `Rng` module of the `nrf52832-hal` crate to generate random numbers for X or Y coordinates or colors.

## Part 3: Animate

Once you are able to draw a fixed and randomized pattern, consider drawing a moving pattern, such as a [Spinning Indicator](https://en.wikipedia.org/wiki/Throbber), or animated character.

Don't forget to respect the packet rate limit of 64 messages per second! In order to reduce the number of packets sent, you can locally calculate the state of the board, and only update pixels that need to change with each frame.

Some packets may be lost, so it may be necessary to periodically redraw the current image.
